<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flappy Bird Clone</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: skyblue;
      overflow: hidden;
      font-family: sans-serif;
    }
    #game {
      width: 100%;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }
    #bird {
      width: 40px;
      height: 40px;
      background-color: yellow;
      border-radius: 50%;
      position: absolute;
      top: 150px;
      left: 100px;
    }
    .pipe {
      width: 60px;
      background: green;
      position: absolute;
    }
    .pipe.top {
      top: 0;
    }
    .pipe.bottom {
      bottom: 0;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      color: white;
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="score">Score: 0</div>
    <div id="bird"></div>
  </div>

  <script>
  const bird = document.getElementById("bird");
  const game = document.getElementById("game");
  const scoreEl = document.getElementById("score");

  let birdY = 150;
  let gravity = 0.25;
  let velocity = 0;
  let isGameOver = false;
  let score = 0;

  function jump() {
    if (!isGameOver) velocity = -8;
  }

  document.addEventListener("keydown", jump);
  document.addEventListener("click", jump);

  function createPipe() {
    const gap = 250;
    const pipeX = game.offsetWidth;
    const pipeHeight = Math.floor(Math.random() * (game.offsetHeight - gap - 100)) + 50;

    const topPipe = document.createElement("div");
    topPipe.classList.add("pipe", "top");
    topPipe.style.height = pipeHeight + "px";
    topPipe.style.left = pipeX + "px";

    const bottomPipe = document.createElement("div");
    bottomPipe.classList.add("pipe", "bottom");
    bottomPipe.style.height = game.offsetHeight - pipeHeight - gap + "px";
    bottomPipe.style.left = pipeX + "px";

    game.appendChild(topPipe);
    game.appendChild(bottomPipe);

    let passed = false;

    const moveInterval = setInterval(() => {
        if (isGameOver) return clearInterval(moveInterval);

        // Move pipes left
        let x = parseInt(topPipe.style.left);
        x -= 4; // speed
        topPipe.style.left = x + "px";
        bottomPipe.style.left = x + "px";

        // Collision check
        if (
            x < 140 && x + 60 > 100 &&  // Pipes overlapping bird's horizontal range (bird left: 100, bird right: 140)
            (
                (birdY < topPipe.offsetHeight) ||                         // Bird hits top pipe vertically
                (birdY + 40 > game.offsetHeight - bottomPipe.offsetHeight) // Bird hits bottom pipe vertically
            )
            ) {
                gameOver();
            }

        // Remove pipes if offscreen
        if (x + 60 < 0) {
        topPipe.remove();
        bottomPipe.remove();
        clearInterval(moveInterval);
        }

        // Score update: when pipe passes bird's x=100, only once
        if (!passed && x + 60 < 100) {
        score++;
        scoreEl.innerText = "Score: " + score;
        passed = true;
        }
    }, 20);
}

  function gameOver() {
    isGameOver = true;
    alert("Game Over! Final Score: " + score);
    window.location.reload();
  }

  setInterval(() => {
    if (!isGameOver) createPipe();
  }, 1600); 

  function gameLoop() {
    if (isGameOver) return;
    velocity += gravity;
    birdY += velocity;

    if (birdY < 0) birdY = 0;
    if (birdY + 40 > game.offsetHeight) gameOver();

    bird.style.top = birdY + "px";
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
